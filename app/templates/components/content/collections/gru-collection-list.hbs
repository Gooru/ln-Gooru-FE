<div class="header">
  <h2>{{t "common.builder"}}</h2>

  <div class="detail">
    {{#if isCollection}}
      {{#if (or model.computedResourceCount model.computedQuestionCount)}}
        <span><b>{{model.computedResourceCount}}</b> {{t "common.resource-pl" count=model.computedResourceCount}}</span>
        {{#if model.computedQuestionCount}}
            | <span><b>{{model.computedQuestionCount}}</b> {{t "common.question-pl" count=model.computedQuestionCount}}</span>
        {{/if}}
      {{else}}
        <span>{{t "common.add-collection-item"}}</span>
      {{/if}}
    {{else}}
      {{#if model.computedQuestionCount}}
        <span><b>{{model.computedQuestionCount}}</b> {{t "common.question-pl" count=model.computedQuestionCount}}</span>
      {{else}}
        <span>{{t "common.add-question"}}</span>
      {{/if}}
    {{/if}}

    <div class="actions">
      <div class="dropdown">
        <button class="btn btn-primary add-item dropdown-toggle" title="{{t 'common.add'}}" type="button" data-toggle="dropdown">{{gru-icon name="add"}}</button>
        <ul class="dropdown-menu dropdown-menu-right">
          {{#if isCollection}} <li><a href="#">{{t "common.from-my-resources"}}</a></li> {{/if}}
          <li><a href="#">{{t "common.from-my-questions"}}</a></li>
          {{#if isCollection}} <li><a href="#" {{action "showModal" "content.modals.gru-resource-new" model}}>{{t "common.new-resource"}}</a></li> {{/if}}
          <li><a href="#" {{action "showModal" "content.modals.gru-question-new" model}}>{{t "common.new-question"}}</a></li>
        </ul>
      </div>
      {{#if (gt items.length 1)}}
        <button class="btn btn-primary sort-items" {{action 'reOrderElements'}}>{{gru-icon name="swap_vert"}}</button>
      {{/if}}
    </div>
  </div>
</div>

<ol class="collection-list sortable" role="tablist" aria-multiselectable="true">

  {{#each items as |item index|}}

    {{content.collections.gru-collection-list-item
      model=item
      index=index
      collection=model
      isCollection=isCollection
      onRemoveCollectionItem=(action 'removeCollectionItem')
      onRemixCollectionItem=(action 'remixCollectionItem')}}

  {{/each}}

  <div>
    {{#if isCollection}} <button class="btn btn-success add-prefix">{{t "common.from-my-resources"}}</button> {{/if}}
    <button class="btn btn-success add-prefix">{{t "common.from-my-questions"}}</button>
    {{#if isCollection}} <button class="btn btn-success add-prefix" {{action "showModal" "content.modals.gru-resource-new" model}}>{{t "common.new-resource"}}</button> {{/if}}
    <button class="btn btn-success add-prefix" {{action "showModal" "content.modals.gru-question-new" model}}>{{t "common.new-question"}}</button>
    <span>{{t "common.drag-drop-suggestions"}}</span>
  </div>

</ol>
