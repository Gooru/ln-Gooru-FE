<div class="class-activities-container">
  <div class="header-container">
    <div class="activity-date-range-selector" {{action "onToggleDatePicker"}}>
      <span class="schedule-date"><span>{{format-date startDate 'DD MMM YYYY'}}</span><span class="{{if isDaily 'hidden'}}"> - {{format-date endDate 'DD MMM YYYY'}}</span></span>
      <span class="dropdown-icon">{{gru-icon name="arrow_drop_down"}}</span>
    </div>
    <div class="schedule-icon {{if isShowScheduledActivities 'active'}}" {{action "onloadScheduledClassActivities"}}>{{gru-icon name="event"}}</div>
    <div class="unscheduled-activity-selector {{if isShowUnscheduledActivities 'active'}}" {{action "onLoadUnscheduledActivities"}}>
      {{gru-icon name="event_busy"}}
    </div>
    <div class="activities">
      <span {{action "onSelectContentSelector"}}>Activities &nbsp;</span>
      <div class="activities-content">
        <div class="contents-selector">
          {{#each contentTypes as |content|}}
            <div class="content-selector {{if content.isActive 'active'}}" {{action "onToggleContent" content bubbles=false}}>
              <i class="icon {{content.type}}-icon"></i>
            </div>
          {{/each}}
        </div>
      </div>
    </div>
    <div class="items-to-grade-selector {{if isShowItemsToGrade 'active'}}" {{action "onShowItemsToGrade"}}>
      <i class="grading-icon"></i>
      ({{gradingItemsList.length}})
    </div>
    <div class="date-range-picker-container">
      <div class="date-range-selector">
        <span class="{{if isDaily 'active'}}" {{action "onSelectRangeType" 'daily'}}>Daily</span>
        <span class="{{if isWeekly 'active'}}" {{action "onSelectRangeType" 'weekly'}}>Weekly</span>
        <span class="{{if isMonthly 'active'}}" {{action "onSelectRangeType" 'monthly'}}>Monthly</span>
      </div>
      {{#if isDaily}}
        {{ca-date-picker
          showPreviousMonth="showPreviousMonth"
          showNextMonth="showNextMonth"
          forMonth=forMonth
          forYear=forYear
          onSelectDate="onSelectDate"
          updateMonthAndYear=false
          highlightFirstDayOfMonth=false
          onSelectToday="onSelectToday"
          showToday=true
          selectedDate=selectedDate
          activities=datewiseActivities
          highlightActivities=true
        }}
      {{else if isWeekly}}
        {{ca-week-picker
          forMonth=forMonth
          forYear=forYear
          onSelectWeek="onSelectWeek"
          showPreviousMonth="showPreviousMonth"
          showNextMonth="showNextMonth"
          selectedWeekDate=selectedWeekDate
          activities=datewiseActivities
          highlightActivities=true
          }}
      {{else}}
        {{ca-month-picker
          forMonth=forMonth
          forYear=forYear
          showCalendarView=true
          onSelectMonth="onSelectMonth"
          selectedMonth=selectedMonth
        }}
      {{/if}}
    </div>
  </div>
  <div class="body-container {{if isShowScheduledActivities 'content-selecter'}}">
    <div class="activities-cards-container">
      {{#if isShowUnscheduledActivities}}
        {{#each unScheduledActivities as |unScheduledActivity|}}
          {{new-cards/gru-class-activity-card
            activity = unScheduledActivity
            isUnscheduledActivity = true
            onRescheduleActivity = "onRescheduleActivity"
            onShowContentPreview = "onShowContentPreview"
          }}
        {{else}}
          You don't have any activities
        {{/each}}
      {{/if}}

      {{#if isShowScheduledActivities}}
          {{#each scheduledActivitiesList as |scheduledActivity|}}
            {{new-cards/gru-class-activity-card
              activity = scheduledActivity
              onRemoveClassActivity='removeClassActivity'
              onShowStudentsList = "onShowStudentsList"
              onOpenPerformanceEntry = "onOpenPerformanceEntry"
              onClosePerformanceEntry = "onClosePerformanceEntry"
              onRescheduleActivity = "onRescheduleActivity"
              onEnableMastery = "onEnableMastery"
              onShowContentPreview = "onShowContentPreview"}}
          {{else}}
            <div class="plan-activities-msg">
              Add activities to conduct in class.
            </div>
          {{/each}}
      {{/if}}
      {{#if isShowItemsToGrade}}
        {{#each gradingItems as |gradingItem|}}
          {{new-cards/gru-activity-grading-card
            gradingItem = gradingItem
            onGradeItem = "onGradeItem"}}
        {{/each}}
      {{/if}}
    </div>
  </div>
</div>

{{#if isShowDaterangePicker}}
  <div class="ca-datepicker-schedule-container ca-datepicker-popover-container">
    {{ca-daterange-datepicker
      closeDatePicker='onCloseDaterangePicker'
      onScheduleForDate='onScheduleByDate'
      onScheduleForMonth='onScheduleByMonth'
      endDate=endDate
      allowTwoDateRangePicker=allowTwoDateRangePicker}}
  </div>
{{/if}}

{{#if isShowStudentsList}}
  {{teacher/class/ca-student-list-pull-up
    classActivity = selectedActivityClass.activity
    classId = selectedActivityClass.id
    members = selectedActivityClass.members
    showPullUp = isShowStudentsList}}
{{/if}}

<!-- Acitvity Add Performance Data -->
{{#if isShowAddData}}
  {{#reports/pull-up/activity/add-performance-data
    showPullUp = isShowAddData
    activityDate = selectedClassActivity.activationDate
    activityTitle = selectedActivityContent.title
    onClosePullUp = "onClosePerformanceEntry"
    contentType = selectedActivityContent.collectionType
  }}
    {{reports/pull-up/activity/add-student-performance-data
      collection = selectedActivityContent
      course = selectedClassData.course
      class = selectedClassData
      students = selectedClassActivityMembers
      activityData = selectedClassActivity
      onClosePullUp = "onClosePerformanceEntry"
      contentType = selectedActivityContent.collectionType
    }}
  {{/reports/pull-up/activity/add-performance-data}}
{{/if}}

{{#if isShowQuestionGrading}}
  {{grade/pull-up/free-response-question-grade
    isDCAContext=true
    showPullUp=isShowQuestionGrading
    context=gradingObject
    itemsToGrade=gradingItemsList}}
{{/if}}
{{#if isShowOaGrading}}
  {{activity/offline/grading-report
    showPullUp=isShowOaGrading
    context=gradingObject
    itemsToGrade=gradingItemsList
    isTeacher=true
    refreshItem='onRefreshItem'
  }}
{{/if}}

<!-- Preview -->
{{#if isShowContentPreview}}
  {{reports/pull-up/gru-collection-preview
    showPullUp=isShowContentPreview
    previewContentId=previewContent.contentId
    previewContentType=previewContent.contentType}}
{{/if}}

{{#if isShowOfflineActivityPreview}}
  {{reports/pull-up/oa-preview
    showPullUp=isShowOfflineActivityPreview
    oaId=previewContent.contentId
    isReportView=false
  }}
{{/if}}
