<div class="user-proficiency">
  <div class="taxonomy-info">
    <div class="dropdown categories">
      <button class="dropbtn btn-dropdown" type="button" data-toggle="dropdown">{{selectedCategory.title}}
        <span class="caret"></span></button>
      <ul class="dropdown-menu category-list">
        {{#each categories as |category|}}
          <li class="list-item category {{if (eq selectedCategory.id category.id) 'active'}}" {{action "onSelectCategory" category}}>{{category.title}}</li>
        {{/each}}
      </ul>
    </div>
    <div class="dropdown subjects">
      <button class="dropbtn btn-dropdown" type="button" data-toggle="dropdown">{{selectedSubject.title}}
        <span class="caret"></span></button>
      <ul class="dropdown-menu subject-list">
        {{#each taxonomySubjects as |subject|}}
          <li class="list-item subject {{if (eq selectedSubject.id subject.id) 'active'}}" {{action "onSelectItem" subject}}>{{subject.title}}</li>
        {{/each}}
      </ul>
    </div>
  </div>
  <div class="panel left-panel">
    <div class="panel-header">
      <div class="title {{selectedMatrixView}}">
        {{selectedSubject.title}}<br>
      </div>
      <div class="framework">
        {{framework}}
      </div>
    </div>
    <div class="panel-body matrix">
      {{#if showProficiencyChart}}
        {{proficiency/learner-proficiency-domain-matrix
          timeLine=timeLine
          userId=userId
          subject=selectedSubject
          competencyMatrixDomains=competencyMatrixDomains
          competencyMatrixCoordinates=competencyMatrixCoordinates
          isShowMatrixChart=true
          selectedDomain=selectedDomain
          showGutCompetency=showGutCompetency
          subjectCode=subjectCode
          showExpandedButton=true
          showBaseLine=false
          onSelectCompetency="onSelectCompetency"
          selectedCompetency=selectedCompetency
          fwCompetencies=fwCompetencies
        }}
      {{/if}}
      <div class="proficiency-tags">
        <div class="proficiency-legends">
          <div class="mastered legend">
            <span class="box"></span>
            <span class="title">{{t 'profile.proficiency.mastered'}}</span>
          </div>
          <div class="in-progress legend">
            <span class="box"></span>
            <span class="title">{{t 'profile.proficiency.in-progress'}}</span>
          </div>
          <div class="not-started legend">
            <span class="box"></span>
            <span class="title">{{t 'profile.proficiency.not-started'}}</span>
          </div>
          <div class="show-gut legend">
            <span class="box"></span>
            <span class="title">{{t 'competencies-not-in-framework'}}</span>
          </div>
          <div class="skyline legend">
            <span class="box-skyline"></span>
            <span class="title">{{t 'profile.proficiency.skyline'}}</span>
          </div>
        </div>
      </div>

      <div class="time-series">
        {{charts/monthly-time-series-chart onSelectMonth="onSelectMonth"}}
      </div>

    </div>
  </div>
  <div class="panel right-panel">
    <div class="panel-header">
      <div class="dropdown categories">
        <div class="active-item active-categrory">
          <div class="label ellipsis">{{selectedCategory.title}}</div>
          <div class="icon">{{gru-icon name="arrow_drop_down"}}</div>
        </div>
        <div class="dropdown-content categrory-list">
          {{#each categories as |category|}}
            <div class="list-item categrory {{if (eq selectedCategory.id category.id) 'active'}}" {{action "onSelectCategory" category}}>{{category.title}}</div>
          {{/each}}
        </div>
      </div>
    </div>
    <div class="panel-body">
      {{proficiency/subject-item-list taxonomySubjects=taxonomySubjects selectedItem=selectedSubject onSelectItem="onSelectItem"}}
    </div>
  </div>
  {{#gru-pull-out showPullOut=showPullOut competencyData=competencyData showGutCompetency=showGutCompetency fwDomains=fwDomains fwCompetencies=fwCompetencies onClosePullOut='onClosePullOut' title=description description=title showMore=showMore isLoading=isLoading as |section|}}
    {{#if section.isLessContent}}
      {{proficiency/competencies-pull-out-body
        userId=userId
        fwCompetencies=fwCompetencies
        competencyData=competencyData
        isLoading=isLoading
        competencyMatrixs=competencyMatrixs
        showPullOut=showPullOut
        title=description
        description=title
     }}
    {{/if}}
  {{/gru-pull-out}}
</div>
